<html>
<body>
<svg class="chart"></svg>
</body>
<style>
  .y-axis .domain {
    color : white
  }
  .y-axis .tick line{
    color : white
  }
</style>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
  var input = {
    "domain": {
      "x" : ['12AM', '6AM', '12PM', '6PM'],
      "y" : ['monday', 'tuesday', 'wednesday']
    },
    "data" : [[4,5,1,7],[1,8,3,100],[5,6,3,100]]
  }

  var width = 1500;
  var height = 500;
  var maxRadius = 25;
  var gridSize = 60;
  var leftPadding = 150;
  var topPadding = 70;

  var xScale = d3.scaleOrdinal()
    .domain(input.domain.x)
    .range(d3.range(0, gridSize * input.domain.x.length, gridSize));
  var xAxis = d3.axisTop(xScale);

  var yScale = d3.scaleOrdinal()
    .domain(input.domain.y)
    .range(d3.range(0, gridSize * input.domain.y.length, gridSize));
  var yAxis = d3.axisLeft(yScale);

  var chart = d3.select(".chart")
    .style("width", width)
    .style("height", height);

  chart.append("g")
    .attr("class", "x-axis")
    .attr("transform", "translate(" + leftPadding + "," + (topPadding - 40)+ ")")
    .call(xAxis);

  chart.append("g")
    .attr("class", "y-axis")
    .attr("transform", "translate(90," + topPadding + ")")
    .call(yAxis);

  var row = chart
    .selectAll("svg")
      .data(input.data)
    .enter().append("svg")
      .attr("y", function(d, i) {return (i * gridSize + topPadding - gridSize)});

  function generateColor(size) {
    if(size <= 3) {return d3.interpolateGnBu(0.25)}
    else if(size <= 6) {return d3.interpolateGnBu(0.5)}
    else if(size <= 8) {return d3.interpolateGnBu(0.75)}
    else {return d3.interpolateGnBu(1)};
  }

  var circle = row.selectAll("circle")
      .data( function(d,i) { return d; } )
    .enter().append("circle")
      .style("r", function(d,i) { if (d*3 > 25) {return 25} else {return d*3} })
      .style("cx", function(d,i) { return (i * 60) + 150; })
      .style("cy", 60)
      .style("fill", function (d) {return generateColor(d)});
</script>
</html>
